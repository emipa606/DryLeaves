<?xml version="1.0" encoding="utf-8" ?>
<Defs>

    <ThingDef Name="TobaccoBase" ParentName="MakeableDrugBase" Abstract="True">
        <rotatable>false</rotatable>
        <techLevel>Neolithic</techLevel>
        <statBases>
            <Flammability>1.3</Flammability>
		</statBases>
        <ingestible>
			<foodType>Plant, Processed</foodType>
            <joyKind>Chemical</joyKind>
			<nurseable>true</nurseable>
			<drugCategory>Social</drugCategory>
			<ingestSound>Ingest_Smoke</ingestSound>
			<ingestEffect>Smoke_Joint</ingestEffect>
            <ingestEffectEat>EatVegetarian</ingestEffectEat>
			<ingestHoldOffsetStanding>
				<northDefault>
					<offset>(0.27,0,0.08)</offset>
					<behind>true</behind>
				</northDefault>
				<east>
					<offset>(0.45,0,0.08)</offset>
				</east>
				<south>
					<offset>(0.27,0,0.08)</offset>
				</south>
				<west>
					<offset>(-0.50,0,0.08)</offset>
					<flip>true</flip>
				</west>
			</ingestHoldOffsetStanding>
			<ingestHoldUsesTable>false</ingestHoldUsesTable>
			<ingestCommandString>Smoke {0}</ingestCommandString>
			<ingestReportString>Smoking {0}.</ingestReportString>
		</ingestible>
        <!--<recipeMaker>
			<recipeUsers>
				<li>CraftingSpot</li>
                <li>DrugLab</li>
			</recipeUsers>
            <workSpeedStat>DrugCookingSpeed</workSpeedStat>
            <workSkill>Cooking</workSkill>
		</recipeMaker>-->
        <comps>
			<li Class="CompProperties_Drug">
				<chemical>Nicotine</chemical>
				<addictiveness>0.03</addictiveness>
				<minToleranceToAddict>0.010</minToleranceToAddict>
				<existingAddictionSeverityOffset>0.20</existingAddictionSeverityOffset>
				<needLevelOffset>1</needLevelOffset>
				<listOrder>21</listOrder>
			</li>
		</comps>
    </ThingDef>

	<HediffDef>
		<defName>NicotineHigh</defName>
		<hediffClass>HediffWithComps</hediffClass>
		<label>high on nicotine</label>
		<defaultLabelColor>(1,0,0.5)</defaultLabelColor>
		<scenarioCanAdd>true</scenarioCanAdd>
		<maxSeverity>1.0</maxSeverity>
		<comps>
			<li Class="HediffCompProperties_SeverityPerDay">
				<severityPerDay>-0.40</severityPerDay>
			</li>
		</comps>
		<stages>
			<li>
				<painOffset>-0.02</painOffset>
				<capMods>
					<li>
						<capacity>Consciousness</capacity>
						<offset>0.02</offset>
					</li>
					<li>
						<capacity>Moving</capacity>
						<offset>0.01</offset>
					</li>
				</capMods>
				<statOffsets>
					<MentalBreakThreshold>-0.1</MentalBreakThreshold>
				</statOffsets>
			</li>
		</stages>
	</HediffDef>

	<ThoughtDef>
		<defName>NicotineHigh</defName>
		<workerClass>ThoughtWorker_Hediff</workerClass>
		<hediff>NicotineHigh</hediff>
		<validWhileDespawned>true</validWhileDespawned>
		<stages>
			<li>
				<label>high on nicotine</label>
				<description>Nothing like a good smoke.</description>
				<baseMoodEffect>5</baseMoodEffect>
			</li>
		</stages>
	</ThoughtDef>

	<!-- Nicotine addiction -->

	<ChemicalDef>
		<defName>Nicotine</defName>
		<label>Nicotine</label>
		<addictionHediff>NicotineAddiction</addictionHediff>
		<toleranceHediff>NicotineTolerance</toleranceHediff>
        <onGeneratedAddictedToleranceChance>0.8</onGeneratedAddictedToleranceChance>
        <onGeneratedAddictedEvents>
            <li>
                <hediff>Asthma</hediff>
                <chance>0.15</chance>
                <partsToAffect>
                    <li>Lung</li>
                </partsToAffect>
                <countToAffect>2</countToAffect>
            </li>
            <li>
                <hediff>Carcinoma</hediff>
                <chance>0.05</chance>
                <partsToAffect>
                    <li>Lung</li>
                </partsToAffect>
                <countToAffect>1</countToAffect>
            </li>
        </onGeneratedAddictedEvents>
	</ChemicalDef>

	<NeedDef ParentName="DrugAddictionNeedBase">
		<defName>Chemical_Nicotine</defName>
		<needClass>Need_Chemical</needClass>
		<label>Nicotine</label>
		<description>Because of a developed Nicotine dependence, this person needs to regularly consume the drug to avoid withdrawal symptoms.</description>
		<listPriority>26</listPriority>
	</NeedDef>

	<HediffDef ParentName="DrugToleranceBase">
		<defName>NicotineTolerance</defName>
		<label>nicotine tolerance</label>
		<comps>
			<li Class="HediffCompProperties_SeverityPerDay">
				<severityPerDay>-0.015</severityPerDay>
			</li>
			<li Class="HediffCompProperties_DrugEffectFactor">
				<chemical>Nicotine</chemical>
			</li>
		</comps>
		<hediffGivers>
			<li Class="HediffGiver_RandomDrugEffect">
				<hediff>Asthma</hediff>
				<baseMtbDays>180</baseMtbDays>
				<minSeverity>0.50</minSeverity>
				<partsToAffect>
					<li>Lung</li>
				</partsToAffect>
				<countToAffect>2</countToAffect>
			</li>
			<li Class="HediffGiver_RandomDrugEffect">
				<hediff>Carcinoma</hediff>
				<baseMtbDays>180</baseMtbDays>
				<minSeverity>0.40</minSeverity>
				<partsToAffect>
                    <li>Lung</li>
				</partsToAffect>
				<countToAffect>1</countToAffect>
			</li>
		</hediffGivers>
	</HediffDef>

	<HediffDef ParentName="AddictionBase">
		<defName>NicotineAddiction</defName>
		<hediffClass>Hediff_Addiction</hediffClass>
		<label>Nicotine dependence</label>
		<causesNeed>Chemical_Nicotine</causesNeed>
		<comps>
			<li Class="HediffCompProperties_SeverityPerDay">
				<severityPerDay>-0.025</severityPerDay>
			</li>
		</comps>
		<stages>
			<li></li>
			<li>
				<label>withdrawal</label>
                <capMods>
                    <li>
                        <capacity>Consciousness</capacity>
                        <offset>-0.20</offset>
                    </li>
                    <li>
                        <capacity>Moving</capacity>
                        <offset>-0.15</offset>
                    </li>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>-0.10</offset>
                    </li>
                </capMods>
				<mentalStateGivers>
					<li>
						<mentalState>Binging_Food</mentalState>
						<mtbDays>30</mtbDays>
					</li>
				</mentalStateGivers>
				<statOffsets>
					<MentalBreakThreshold>0.1</MentalBreakThreshold>
				</statOffsets>
			</li>
		</stages>
	</HediffDef>

	<ThoughtDef>
		<defName>NicotineWithdrawal</defName>
		<workerClass>ThoughtWorker_Hediff</workerClass>
		<hediff>NicotineAddiction</hediff>
        <validWhileDespawned>true</validWhileDespawned>
		<stages>
			<li>
				<visible>false</visible>
			</li>
			<li>
				<label>nicotine withdrawal</label>
				<description>I would kill for a smoke right now.</description>
				<baseMoodEffect>-20</baseMoodEffect>
			</li>
		</stages>
	</ThoughtDef>

</Defs>